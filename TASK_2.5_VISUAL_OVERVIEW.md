# Task 2.5: Consumer Group Monitoring - Visual Architecture

## ğŸ¨ UI Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App.tsx (Router)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”œâ”€â”€ Route: /consumers
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Consumers.tsx    â”‚ â—„â”€â”€ Main List Page
                    â”‚  (List + Router)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                   â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   List View       â”‚           â”‚  Detail View           â”‚
  â”‚   (Table)         â”‚           â”‚  Route: /:groupId      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ ConsumerGroupDetail   â”‚
                                    â”‚ Component             â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   LagChart        â”‚
                                    â”‚   Component       â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Consumers.tsx  â”‚          â”‚ ConsumerGroup    â”‚           â”‚
â”‚  â”‚ (List Page)    â”‚          â”‚ Detail Component â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚                           â”‚                      â”‚
â”‚           â”‚ useEffect()               â”‚ useEffect()          â”‚
â”‚           â”‚ (every 5s)                â”‚ (every 5s)           â”‚
â”‚           â”‚                           â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚         takhinApi (Axios Client)             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚                         â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                         â”‚
            â”‚ HTTP Requests           â”‚
            â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Go)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚         Console API Server (Chi Router)         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                         â”‚                                    â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚            â”‚            â”‚            â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  GET       â”‚  â”‚  GET       â”‚  â”‚  GET           â”‚        â”‚
â”‚  â”‚  /consumer-â”‚  â”‚  /consumer-â”‚  â”‚  /monitoring/  â”‚        â”‚
â”‚  â”‚  groups    â”‚  â”‚  groups/   â”‚  â”‚  metrics       â”‚        â”‚
â”‚  â”‚            â”‚  â”‚  :groupId  â”‚  â”‚                â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚            â”‚            â”‚            â”‚                      â”‚
â”‚            â”‚            â”‚            â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         Coordinator Service                     â”‚       â”‚
â”‚  â”‚  - Groups state management                      â”‚       â”‚
â”‚  â”‚  - Member tracking                              â”‚       â”‚
â”‚  â”‚  - Offset commits                               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                    â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         Topic Manager                           â”‚       â”‚
â”‚  â”‚  - High water marks                             â”‚       â”‚
â”‚  â”‚  - Partition offsets                            â”‚       â”‚
â”‚  â”‚  - Log end offsets                              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š List View UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Consumer Groups                [Auto-Refresh: ON] [Refresh]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Group ID  â”‚ State  â”‚ Members â”‚ Topics  â”‚ Lag â”‚ Actionsâ”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ cg-app-1  â”‚ ğŸŸ¢STABLEâ”‚   3    â”‚ orders â”‚ 42  â”‚ Detailsâ”‚ â”‚
â”‚  â”‚ cg-app-2  â”‚ ğŸŸ REBAL â”‚   2    â”‚ events â”‚ 250 â”‚ Detailsâ”‚ â”‚
â”‚  â”‚ cg-analyticsâ”‚ğŸŸ¢STABLEâ”‚   1    â”‚ logs  â”‚1500 â”‚ Detailsâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  Total 3 consumer groups                        Page 1 of 1 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Visual Elements
- **Clickable Group ID**: Links to detail view
- **Color-coded State**: Green (Stable), Orange (Rebalancing), Red (Dead)
- **Tag Lists**: Topics shown as tags
- **Lag Indicators**: Color-coded by threshold
- **Auto-refresh Toggle**: Primary blue when ON, default when OFF

---

## ğŸ“ˆ Detail View UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â—„ Back] Consumer Group: cg-app-1  [Auto-Refresh] [Refresh]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Group State â”‚  Members  â”‚   Topics   â”‚   Total Lag     â”‚â”‚
â”‚  â”‚     STABLE   â”‚     3     â”‚      2     â”‚      142        â”‚â”‚
â”‚  â”‚              â”‚           â”‚            â”‚  (ğŸŸ  Orange)    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€ Group Information â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Group ID:       cg-app-1                              â”‚ â”‚
â”‚  â”‚  State:          ğŸŸ¢ STABLE                             â”‚ â”‚
â”‚  â”‚  Protocol Type:  consumer                              â”‚ â”‚
â”‚  â”‚  Protocol:       range                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€ Consumer Lag Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚  orders (Total Lag: ğŸŸ  100)                             â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 68%                     â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚  Partition Details:                                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚â”‚
â”‚  â”‚  â”‚Part 0   â”‚ â”‚Part 1   â”‚ â”‚Part 2   â”‚                  â”‚â”‚
â”‚  â”‚  â”‚ğŸŸ¢ Lag:30â”‚ â”‚ğŸŸ¢ Lag:40â”‚ â”‚ğŸŸ¢ Lag:30â”‚                  â”‚â”‚
â”‚  â”‚  â”‚Cur: 5000â”‚ â”‚Cur: 4960â”‚ â”‚Cur: 5020â”‚                  â”‚â”‚
â”‚  â”‚  â”‚End: 5030â”‚ â”‚End: 5000â”‚ â”‚End: 5050â”‚                  â”‚â”‚
â”‚  â”‚  â”‚â–“â–“â–“â–‘     â”‚ â”‚â–“â–“â–“â–“â–‘    â”‚ â”‚â–“â–“â–“â–‘     â”‚                  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚  events (Total Lag: ğŸŸ¢ 42)                              â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 32%                           â”‚â”‚
â”‚  â”‚  [Partition details similar...]                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€ Members â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Member ID        â”‚ Client ID â”‚ Host      â”‚ Partitions  â”‚â”‚
â”‚  â”‚ consumer-1-abc   â”‚ app-1     â”‚ 10.0.1.5  â”‚ 0, 3        â”‚â”‚
â”‚  â”‚ consumer-2-def   â”‚ app-2     â”‚ 10.0.1.6  â”‚ 1, 4        â”‚â”‚
â”‚  â”‚ consumer-3-ghi   â”‚ app-3     â”‚ 10.0.1.7  â”‚ 2, 5        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€ Offset Commits â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Topic â”‚ Partâ”‚ Current Offsetâ”‚ Lag â”‚ Log End Offset     â”‚â”‚
â”‚  â”‚ ordersâ”‚  0  â”‚      5,000    â”‚ğŸŸ¢30 â”‚      5,030         â”‚â”‚
â”‚  â”‚ ordersâ”‚  1  â”‚      4,960    â”‚ğŸŸ¢40 â”‚      5,000         â”‚â”‚
â”‚  â”‚ ordersâ”‚  2  â”‚      5,020    â”‚ğŸŸ¢30 â”‚      5,050         â”‚â”‚
â”‚  â”‚ eventsâ”‚  0  â”‚      8,150    â”‚ğŸŸ¢15 â”‚      8,165         â”‚â”‚
â”‚  â”‚ eventsâ”‚  1  â”‚      8,140    â”‚ğŸŸ¢12 â”‚      8,152         â”‚â”‚
â”‚  â”‚ eventsâ”‚  2  â”‚      8,145    â”‚ğŸŸ¢15 â”‚      8,160         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚  Total 6 partitions                              Page 1 of 1â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Lag Chart Component Structure

```
LagChart Component
â”‚
â”œâ”€â”€ For each topic:
â”‚   â”‚
â”‚   â”œâ”€â”€ Card Header
â”‚   â”‚   â”œâ”€â”€ Topic name
â”‚   â”‚   â””â”€â”€ Total lag tag (color-coded)
â”‚   â”‚
â”‚   â”œâ”€â”€ Statistics Row (4 columns)
â”‚   â”‚   â”œâ”€â”€ Total Lag (large, color-coded)
â”‚   â”‚   â”œâ”€â”€ Average Lag
â”‚   â”‚   â”œâ”€â”€ Max Lag
â”‚   â”‚   â””â”€â”€ Partition Count
â”‚   â”‚
â”‚   â”œâ”€â”€ Bar Chart
â”‚   â”‚   â””â”€â”€ Horizontal bar (% of max lag across topics)
â”‚   â”‚
â”‚   â””â”€â”€ Partition Grid (responsive auto-fill)
â”‚       â””â”€â”€ For each partition:
â”‚           â”œâ”€â”€ Partition ID + Lag tag
â”‚           â”œâ”€â”€ Current offset
â”‚           â”œâ”€â”€ Log end offset
â”‚           â””â”€â”€ Mini progress bar (% of topic lag)
â”‚
â””â”€â”€ Responsive grid layout (min 200px per item)
```

---

## ğŸ”Œ API Call Sequences

### List View Load
```
User navigates to /consumers
    â”‚
    â”œâ”€â–º useEffect() triggered
    â”‚
    â”œâ”€â–º Promise.all([
    â”‚       takhinApi.listConsumerGroups(),
    â”‚       takhinApi.getMonitoringMetrics()
    â”‚   ])
    â”‚
    â”œâ”€â–º Backend: GET /api/consumer-groups
    â”‚   â”‚
    â”‚   â””â”€â–º Returns: ConsumerGroupSummary[]
    â”‚
    â”œâ”€â–º Backend: GET /api/monitoring/metrics
    â”‚   â”‚
    â”‚   â””â”€â–º Returns: MonitoringMetrics (includes consumerLags)
    â”‚
    â”œâ”€â–º Frontend: Map lag data to groups
    â”‚
    â””â”€â–º Render table with combined data
```

### Detail View Load
```
User clicks group ID "cg-app-1"
    â”‚
    â”œâ”€â–º Navigate to /consumers/cg-app-1
    â”‚
    â”œâ”€â–º ConsumerGroupDetail component mounts
    â”‚
    â”œâ”€â–º useEffect() triggered
    â”‚
    â”œâ”€â–º Promise.all([
    â”‚       takhinApi.getConsumerGroup('cg-app-1'),
    â”‚       takhinApi.getMonitoringMetrics()
    â”‚   ])
    â”‚
    â”œâ”€â–º Backend: GET /api/consumer-groups/cg-app-1
    â”‚   â”‚
    â”‚   â””â”€â–º Returns: ConsumerGroupDetail
    â”‚       â”œâ”€â”€ groupId, state, protocol
    â”‚       â”œâ”€â”€ members[]
    â”‚       â””â”€â”€ offsetCommits[]
    â”‚
    â”œâ”€â–º Backend: GET /api/monitoring/metrics
    â”‚   â”‚
    â”‚   â””â”€â–º Returns: MonitoringMetrics
    â”‚       â””â”€â”€ consumerLags[] (find by groupId)
    â”‚
    â”œâ”€â–º Frontend: Correlate data
    â”‚   â”œâ”€â”€ Match offsetCommits with lag data
    â”‚   â”œâ”€â”€ Calculate per-partition lag
    â”‚   â””â”€â”€ Find log end offsets
    â”‚
    â””â”€â–º Render:
        â”œâ”€â”€ Statistics cards
        â”œâ”€â”€ Group info
        â”œâ”€â”€ LagChart (with lag data)
        â”œâ”€â”€ Members table
        â””â”€â”€ Offsets table (with lag columns)
```

### Auto-Refresh Cycle
```
Auto-refresh enabled
    â”‚
    â”œâ”€â–º setInterval(fetchData, 5000)
    â”‚
    â””â”€â–º Every 5 seconds:
        â”œâ”€â–º Repeat API calls
        â”œâ”€â–º Update state
        â””â”€â–º React re-renders
            â”œâ”€â”€ Tables update
            â”œâ”€â”€ Charts animate
            â””â”€â”€ Colors adjust
```

---

## ğŸ¯ State Management

### List View State
```typescript
states:
  - loading: boolean           // API call in progress
  - groups: ConsumerGroupSummary[]
  - lags: Map<groupId, ConsumerGroupLag>
  - autoRefresh: boolean       // Toggle state

effects:
  - [autoRefresh] â†’ start/stop interval
  
events:
  - handleRefresh() â†’ manual fetch
  - handleViewDetails(groupId) â†’ navigate
  - setAutoRefresh() â†’ toggle
```

### Detail View State
```typescript
states:
  - loading: boolean
  - detail: ConsumerGroupDetail | null
  - lag: ConsumerGroupLag | null

effects:
  - [groupId] â†’ fetch when groupId changes
  - Auto-refresh every 5s
  
computed:
  - totalLag from lag data
  - lagColor based on threshold
  - partition lag by matching IDs
```

---

## ğŸ¨ Color Palette

### Lag Colors
```
Green   (#52c41a) : lag < 100
Orange  (#faad14) : 100 â‰¤ lag < 1000
Red     (#ff4d4f) : lag â‰¥ 1000
```

### State Colors
```
Green   : Stable
Orange  : Rebalancing
Red     : Dead
Default : Empty
```

### UI Colors (Ant Design)
```
Primary (#1677ff) : Auto-refresh ON, links
Default (#ffffff) : Buttons, cards
Border  (#d9d9d9) : Dividers, borders
Text    (#000000) : Primary text
Gray    (#999999) : Secondary text, empty states
```

---

## ğŸ“ Responsive Breakpoints

```
Desktop (â‰¥1200px):
  â”œâ”€â”€ Statistics: 4 columns
  â”œâ”€â”€ Partition grid: 4-5 items/row
  â””â”€â”€ Full table width

Tablet (768px - 1199px):
  â”œâ”€â”€ Statistics: 2 columns (2 rows)
  â”œâ”€â”€ Partition grid: 2-3 items/row
  â””â”€â”€ Table horizontal scroll

Mobile (<768px):
  â”œâ”€â”€ Statistics: 1 column (4 rows)
  â”œâ”€â”€ Partition grid: 1-2 items/row
  â””â”€â”€ Table scroll + simplified columns
```

---

## ğŸ”„ Update Cycles

```
Page Load
    â”‚
    â””â”€â–º Initial fetch (loading: true)
        â”‚
        â””â”€â–º Data loaded â†’ Render
            â”‚
            â”œâ”€â–º Auto-refresh ON:
            â”‚   â””â”€â–º Fetch every 5s (loading: false, silent update)
            â”‚
            â””â”€â–º Manual refresh:
                â””â”€â–º User click (loading: true, full update)
```

---

## ğŸ§© Component Dependencies

```
Consumers.tsx
  â”œâ”€â”€ Dependencies:
  â”‚   â”œâ”€â”€ react (useState, useEffect)
  â”‚   â”œâ”€â”€ react-router-dom (useParams, useNavigate)
  â”‚   â”œâ”€â”€ antd (Table, Card, Tag, Button, etc.)
  â”‚   â”œâ”€â”€ ../api (takhinApi)
  â”‚   â””â”€â”€ ../components/ConsumerGroupDetail
  â”‚
  â””â”€â”€ Imports:
      â”œâ”€â”€ ConsumerGroupSummary (type)
      â”œâ”€â”€ ConsumerGroupLag (type)
      â””â”€â”€ MonitoringMetrics (type)

ConsumerGroupDetail.tsx
  â”œâ”€â”€ Dependencies:
  â”‚   â”œâ”€â”€ react (useState, useEffect)
  â”‚   â”œâ”€â”€ antd (Card, Table, Descriptions, etc.)
  â”‚   â”œâ”€â”€ ../api (takhinApi)
  â”‚   â””â”€â”€ ./LagChart
  â”‚
  â””â”€â”€ Imports:
      â”œâ”€â”€ ConsumerGroupDetail (type)
      â”œâ”€â”€ ConsumerGroupMember (type)
      â”œâ”€â”€ ConsumerGroupOffsetCommit (type)
      â””â”€â”€ ConsumerGroupLag (type)

LagChart.tsx
  â”œâ”€â”€ Dependencies:
  â”‚   â”œâ”€â”€ react (useMemo)
  â”‚   â”œâ”€â”€ antd (Card, Space, Statistic, Tag)
  â”‚   â””â”€â”€ ../api/types
  â”‚
  â””â”€â”€ Imports:
      â”œâ”€â”€ ConsumerGroupLag (type)
      â””â”€â”€ PartitionLag (type)
```

---

## ğŸ“¦ Bundle Size Impact

```
New Components:
  â”œâ”€â”€ ConsumerGroupDetail.tsx  : ~6.6 KB
  â”œâ”€â”€ LagChart.tsx            : ~5.6 KB
  â””â”€â”€ Consumers.tsx (updated) : ~6.1 KB
      Total new code          : ~18.3 KB

Dependencies (already included):
  â”œâ”€â”€ Ant Design components
  â”œâ”€â”€ React Router
  â””â”€â”€ Axios

Build Output:
  â””â”€â”€ index.js : 1,425 KB (gzipped: 449 KB)
```

---

## âœ… Feature Matrix

| Feature | List View | Detail View | Chart |
|---------|-----------|-------------|-------|
| Display groups | âœ… | - | - |
| Show state | âœ… | âœ… | - |
| Member count | âœ… | âœ… | - |
| Topics list | âœ… | âœ… | âœ… |
| Total lag | âœ… | âœ… | âœ… |
| Per-partition lag | - | âœ… | âœ… |
| Member details | - | âœ… | - |
| Offset commits | - | âœ… | - |
| Log end offset | - | âœ… | âœ… |
| Visual chart | - | - | âœ… |
| Auto-refresh | âœ… | âœ… | âœ… |
| Navigation | âœ… | âœ… | - |
| Color coding | âœ… | âœ… | âœ… |
| Sorting | âœ… | âœ… | - |
| Pagination | âœ… | âœ… | - |
| Empty states | âœ… | âœ… | âœ… |

---

**Architecture Version**: 1.0  
**Last Updated**: 2026-01-02  
**Total Components**: 3 (1 updated, 2 new)  
**Total Lines**: 619 lines of TypeScript/React
